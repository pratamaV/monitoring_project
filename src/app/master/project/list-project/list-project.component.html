<!-- <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<head>
    <script src="https://raw.githack.com/creativetimofficial/argon-dashboard/master/assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.3.1/css/all.min.css" rel="stylesheet">
</head> -->

<body>
    <div class="main-content">
        <app-sidebar></app-sidebar>
        <div id=cover>

            <h4 class="mb-5" style="padding-top: 70px">List Project</h4>
            <div class="row">

                <div class="col">
                    <div class="card shadow">
                        <div class="card-header border-0">
                            <div class="row">
                                <div class="col-12 col-xs-8">
                                    <form [formGroup]="filterForm" method="POST" (ngSubmit)="onGetListProjectFilter(filterForm.value)">
                                        <div class="row">
                                            <div class="form-group col">
                                                <label for="divisi" style="float: left;">Divisi Owner</label>
                                                <select class="custom-select" formControlName="divisi" id="divisi" aria-label="Default select example">
                                                <option *ngFor="let divisi of divitions; let i = index" [ngValue]="divisi.id">
                                                    {{ divisi.divisionName }}
                                                </option>
                                            </select>
                                            </div>
                                            <div class="form-group col">
                                                <label for="direktorate" style="float: left;">Direktorate Owner</label>
                                                <select class="form-select" formControlName="direktorate" id="direktorate" aria-label="Default select example">
                                                <option value="Kepatuhan & SDM">Kepatuhan & SDM</option>
                                                <option value="Keuangan">Keuangan</option>
                                                <option value="Operational Retail">Operational Retail</option>
                                                <option value="Teknik">Teknik</option>
                                                <option value="Utama">Utama</option>
                                            </select>
                                            </div>
                                            <div class="form-group col">
                                                <label for="userPM" style="float: left;">User PM</label>
                                                <select class="custom-select" formControlName="userPM" id="userPM" aria-label="Default select example">
                                                <option *ngFor="let user of usersPm; let i = index" [ngValue]="user.id">
                                                    {{ user.username }}
                                                </option>
                                            </select>
                                            </div>

                                            <div class="form-group col">
                                                <label for="userPMO" style="float: left;">User PMO</label>
                                                <select class="custom-select" formControlName="userPMO" id="userPMO" aria-label="Default select example">
                                                <option *ngFor="let user of usersPmo; let i = index" [ngValue]="user.id">
                                                    {{ user.username }}
                                                </option>
                                            </select>
                                            </div>
                                            <div class="form-group col">
                                                <label for="status">Status <small style="color: red;">*</small></label>
                                                <select class="form-select" formControlName="status" id="status" aria-label="Default select example">
                                              <option value="Not Started">Not Started</option>
                                              <option value="On Schedule">On Schedule</option>
                                              <option value="PTR/ Live">PTR/ Live</option>
                                              <option value="PTR/ Live">Delay</option>
                                            </select>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-6" id="search">
                                                <form>
                                                    <div class="form-group">
                                                        <div class="input-group">
                                                            <span class="input-group-text" id="basic-addon1"><i class="fa fa-search"></i></span>
                                                            <input [(ngModel)]="searchByKeyword" name="searchByKeyword" type="text" class="form-control" placeholder="Cari berdasarkan Keyword" (keyup)="searchLive()">
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>

                                            <div class="col-6" id="button-filter">
                                                <button id="export-excel" class="btn btn-dark btn-sm" (click)="exportexcel()"><i class="fa fa-file"></i> Export to excel</button>&nbsp;
                                                <button id="add-project" class="btn btn-warning btn-sm" (click)="onAddProject()"><i class="fa fa-plus"></i> Add New Project</button>&nbsp;
                                                <button class="btn btn-success btn-sm" (click)="onGetListProject()">Reset Filter</button>&nbsp;
                                                <button type="submit" class="btn btn-info btn-sm">Apply Filter</button>
                                            </div>
                                        </div>
                                    </form>

                                </div>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <div *ngIf="isLoading == true">
                                <div id="id01" class="modal">
                                    <div id="loading" style="display: flex; justify-content: center; align-items: center; height: 100%;">
                                        <div class="spinner-border text-info"></div>
                                    </div>
                                </div>
                            </div>
                            <table class="table align-items-center table-flush" class="table" id="excel-table">
                                <thead class="thead-light">
                                    <tr style="text-align: center;">
                                        <th scope="col">Project Code
                                            <button (click)="onGetProjectBySort('projectCode', 'ASC')" *ngIf="asc == false" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="ASC"><i class="fa fa-caret-up" aria-hidden="true"></i></button>
                                            <button (click)="onGetProjectBySort('projectCode', 'DESC')" *ngIf="asc == true" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="DESC"><i class="fa fa-caret-down" aria-hidden="true"></i></button>
                                        </th>
                                        <th scope="col">Project Name
                                            <button (click)="onGetProjectBySort('projectName', 'ASC')" *ngIf="asc == false" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="ASC"><i class="fa fa-caret-up" aria-hidden="true"></i></button>
                                            <button (click)="onGetProjectBySort('projectName', 'DESC')" *ngIf="asc == true" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="DESC"><i class="fa fa-caret-down" aria-hidden="true"></i></button>
                                        </th>
                                        <th scope="col">Action</th>
                                        <th scope="col">PMO
                                            <button (click)="onGetProjectBySort('pmo', 'ASC')" *ngIf="asc == false" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="ASC"><i class="fa fa-caret-up" aria-hidden="true"></i></button>
                                            <button (click)="onGetProjectBySort('pmo', 'DESC')" *ngIf="asc == true" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="DESC"><i class="fa fa-caret-down" aria-hidden="true"></i></button>
                                        </th>
                                        <th scope="col">PM
                                            <button (click)="onGetProjectBySort('pm', 'ASC')" *ngIf="asc == false" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="ASC"><i class="fa fa-caret-up" aria-hidden="true"></i></button>
                                            <button (click)="onGetProjectBySort('pm', 'DESC')" *ngIf="asc == true" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="DESC"><i class="fa fa-caret-down" aria-hidden="true"></i></button>
                                        </th>
                                        <th scope="col">Directorate Owner
                                            <button (click)="onGetProjectBySort('directorateUser', 'ASC')" *ngIf="asc == false" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="ASC"><i class="fa fa-caret-up" aria-hidden="true"></i></button>
                                            <button (click)="onGetProjectBySort('directorateUser', 'DESC')" *ngIf="asc == true" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="DESC"><i class="fa fa-caret-down" aria-hidden="true"></i></button>
                                        </th>
                                        <!-- <th scope="col">Benefit</th> -->
                                        <!-- <th scope="col">Description</th> -->
                                        <th scope="col">CO-PM
                                            <button (click)="onGetProjectBySort('coPM', 'ASC')" *ngIf="asc == false" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="ASC"><i class="fa fa-caret-up" aria-hidden="true"></i></button>
                                            <button (click)="onGetProjectBySort('coPM', 'DESC')" *ngIf="asc == true" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="DESC"><i class="fa fa-caret-down" aria-hidden="true"></i></button>
                                        </th>
                                        <th scope="col">Divisi Owner
                                            <button (click)="onGetProjectBySort('divisiUser', 'ASC')" *ngIf="asc == false" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="ASC"><i class="fa fa-caret-up" aria-hidden="true"></i></button>
                                            <button (click)="onGetProjectBySort('divisiUser', 'DESC')" *ngIf="asc == true" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="DESC"><i class="fa fa-caret-down" aria-hidden="true"></i></button>
                                        </th>
                                        <th scope="col">Status
                                            <button (click)="onGetProjectBySort('status', 'ASC')" *ngIf="asc == false" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="ASC"><i class="fa fa-caret-up" aria-hidden="true"></i></button>
                                            <button (click)="onGetProjectBySort('status', 'DESC')" *ngIf="asc == true" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="DESC"><i class="fa fa-caret-down" aria-hidden="true"></i></button>
                                        </th>
                                        <!--                                        <th scope="col">Project Weight</th>-->
                                        <th scope="col">Project Precentage
                                            <button (click)="onGetProjectBySort('prosentaseProject', 'ASC')" *ngIf="asc == false" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="ASC"><i class="fa fa-caret-up" aria-hidden="true"></i></button>
                                            <button (click)="onGetProjectBySort('prosentaseProject', 'DESC')" *ngIf="asc == true" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="DESC"><i class="fa fa-caret-down" aria-hidden="true"></i></button>
                                        </th>
                                        <th scope="col">Status Initiatif
                                            <button (click)="onGetProjectBySort('statusProject', 'ASC')" *ngIf="asc == false" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="ASC"><i class="fa fa-caret-up" aria-hidden="true"></i></button>
                                            <button (click)="onGetProjectBySort('statusProject', 'DESC')" *ngIf="asc == true" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="DESC"><i class="fa fa-caret-down" aria-hidden="true"></i></button>
                                        </th>
                                        <th scope="col">Keyword
                                            <button (click)="onGetProjectBySort('keyword', 'ASC')" *ngIf="asc == false" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="ASC"><i class="fa fa-caret-up" aria-hidden="true"></i></button>
                                            <button (click)="onGetProjectBySort('keyword', 'DESC')" *ngIf="asc == true" class="btn btn-outline-secondary btn-sm" data-toggle="tooltip" data-placement="bottom" title="DESC"><i class="fa fa-caret-down" aria-hidden="true"></i></button>
                                        </th>
                                        <th scope="col" [hidden]="userRole != '01'">Update Status Project</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let project of loadedProject; let i = index" [ngStyle]="getStyle(project)">
                                        <th scope="row">{{project.projectCode}}</th>
                                        <td>{{project.projectName}}</td>
                                        <td style="width: 200px;">
                                            <button (click)="onGetProjectById(project.id)" class="btn btn-outline-success btn-sm" data-toggle="tooltip" data-placement="bottom" title="Detail"><i
                                            class="fa fa-eye"></i></button>&nbsp;
                                            <button (click)="onGetReleaseByProjectId(project.id)" class="btn btn-outline-success btn-sm" data-toggle="tooltip" data-placement="bottom" title="Release"><i
                                            class="fa fa-bars"></i></button>&nbsp;
                                            <button (click)="updateProject(project)" class="btn btn-outline-info btn-sm" data-toggle="tooltip" data-placement="bottom" title="Update" [disabled]="project.statusProject==='Completed'"><i class="fa fa-edit"></i></button>&nbsp;
                                        </td>
                                        <td>{{project.pmo.username}}</td>
                                        <td>{{project.pm.username}}</td>
                                        <td>{{project.directorateUser}}</td>
                                        <td>{{project.coPM.username}}</td>
                                        <td>{{project.divisiUser.divisionName}}</td>
                                        <td>{{project.status}}</td>
                                        <!--                                        <td>{{project.weight | number : '1.2-2'}}</td>-->
                                        <td>{{project.prosentaseProject*100 | number : '1.2-2'}}%</td>
                                        <td>{{project.statusProject}}</td>
                                        <!--                                        <td [ngClass]="project.statusProject === 'aktif' ? 'color-red' : 'color-green'">{{project.statusProject}}</td>-->
                                        <td>{{project.keyword}}</td>
                                        <td [hidden]="userRole != '01'">
                                            <select class="form-select-sm" (change)="onChangeStatusProject(project.id, $event)" aria-label="Default select example">
                                            <option disabled="disabled" selected="selected">Select an option.</option>
                                            <option value="Active">Active</option>
                                            <option value="Not Active">Not Active</option>
                                            <option value="Completed">Completed</option>
                                         </select>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                    </div>
                </div>
            </div>
        </div>



    </div>
    <footer class="footer">
        <div class="row align-items-center justify-content-xl-between">
            <div class="col-xl-6 m-auto text-center">
                <div class="copyright">
                    <p></p>
                </div>
            </div>
        </div>
    </footer>
    <!-- <script src="https://raw.githack.com/creativetimofficial/argon-dashboard/master/assets/vendor/jquery/dist/jquery.min.js"></script>
    <script src="https://raw.githack.com/creativetimofficial/argon-dashboard/master/assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script> -->

</body>